<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta http-equiv="ClearType" content="true"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Extracting Libs from a Node.js Project | Mario Ranftl</title><meta name="description" content="Publishing my Metalsmith Plugins: As promised, lets break out my customized plugins I’ve used with metalsmith to build up this site. I had to rename them (see this pull request) in order to be allowed to publish them on metalsmith.io. -- Note by Mario Ranftl"><meta name="author" content="Mario Ranftl"><meta name="keywords" content="metalsmith, plugins, open source, npm, github, metalsmith-word-count, metalsmith-headings-identifier, metalsmith-data-markdown, standalone, javascript, programming, note, mario ranftl, ranf.tl, majodev, ranftl, mario, professional, austria, fehring, steiermark, programming, developer, full stack, information manager, information management, "><meta name="robots" content="all"><meta name="copyright" content="Copyright 2014 Mario Ranftl (ranf.tl | @majodev)"><meta http-equiv="last-modified" content="2014-12-03@13:18:47 +01:00"><meta name="city" content="Fehring"><meta name="zipcode" content="8010"><meta name="country" content="Austria"><meta name="state" content="Austria"><meta name="geo.position" content="46.93597035754931;16.009843460266097"><meta name="geo.placename" content="Austria, Fehring"><meta name="geo.region" content="AT"><meta name="ICBM" content="46.93597035754931, 16.009843460266097"><meta name="msapplication-square70x70logo" content="/assets/img/favicons/windows-tile-70x70.png"><meta name="msapplication-square150x150logo" content="/assets/img/favicons/windows-tile-150x150.png"><meta name="msapplication-square310x310logo" content="/assets/img/favicons/windows-tile-310x310.png"><meta name="msapplication-TileImage" content="/assets/img/favicons/windows-tile-144x144.png"><meta name="msapplication-TileColor" content=""><link rel="apple-touch-icon-precomposed" sizes="152x152" href="/assets/img/favicons/apple-touch-icon-152x152-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="120x120" href="/assets/img/favicons/apple-touch-icon-120x120-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="76x76" href="/assets/img/favicons/apple-touch-icon-76x76-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="60x60" href="/assets/img/favicons/apple-touch-icon-60x60-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="144x144" href="/assets/img/favicons/apple-touch-icon-144x144-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="114x114" href="/assets/img/favicons/apple-touch-icon-114x114-precomposed.png"><link rel="apple-touch-icon-precomposed" sizes="72x72" href="/assets/img/favicons/apple-touch-icon-72x72-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" sizes="228x228" href="/assets/img/favicons/coast-icon-228x228.png"><meta name="mobile-web-app-capable" value="yes"><link rel="icon" sizes="196x196" href="/assets/img/favicons/homescreen-196x196.png"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><link rel="icon" type="image/png" sizes="64x64" href="/assets/img/favicons/favicon.png"><link rel="stylesheet" type="text/css" href="/assets/css/styles.min.css" data-cssinjector="static"><script src="/assets/js/scripts_head.min.js"></script></head><body><div id="ajax-container"><div id="wrapper"><header class="block-header navbar navbar-default nonSelectable" role="navigation"><div class="container-fluid"><div class="navbar-header"><div class="navbar-toggle-affix" data-spy="affix"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-content"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><span><a class="block-navBrand navbar-brand" href="/"><div class="block-navBrandImage"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" data-icon="brain" class="iconic iconic-brain iconic-size-sm" viewbox="0 0 16 16"><g class="iconic-metadata"><title>Brain</title>ƒ</g><g class="iconic-container" data-width="15" data-height="16"><path d="M6.5 8c-.276 0-.5-.224-.5-.5s.224-.5.5-.5h.5v-6c0-.552-.448-1-1-1-2.628 0-4.387 1.731-5.289 4.051.169.08.289.249.289.449 0 .276-.224.5-.5.5-.04 0-.076.014-.113.023-.257.949-.387 1.963-.387 2.977 0 .986.062 1.972.213 2.898.082.059.178.101.287.101.276 0 .5.224.5.5s-.224.5-.5.5c-.017 0-.033-.004-.05-.005.611 2.296 1.938 4.005 4.55 4.005 1.105 0 2-.895 2-2v-6h-.5zm-1-7c.276 0 .5.224.5.5s-.224.5-.5.5c-.827 0-1.5.673-1.5 1.5 0 .276-.224.5-.5.5s-.5-.224-.5-.5c0-1.378 1.122-2.5 2.5-2.5zm-3 7c-.276 0-.5-.224-.5-.5 0-1.378 1.122-2.5 2.5-2.5.276 0 .5-.224.5-.5s.224-.5.5-.5.5.224.5.5c0 .827-.673 1.5-1.5 1.5s-1.5.673-1.5 1.5c0 .276-.224.5-.5.5zm2 7c-.827 0-1.5-.673-1.5-1.5 0-.276.224-.5.5-.5s.5.224.5.5.224.5.5.5.5-.224.5-.5.224-.5.5-.5.5.224.5.5c0 .827-.673 1.5-1.5 1.5zm0-3c-.276 0-.5-.224-.5-.5s.224-.5.5-.5.5-.224.5-.5-.224-.5-.5-.5-.5-.224-.5-.5.224-.5.5-.5c.827 0 1.5.673 1.5 1.5s-.673 1.5-1.5 1.5z" class="iconic-brain-hemisphere iconic-brain-hemisphere-left iconic-property-fill"></path></g><g class="iconic-container" data-width="15" data-height="16"><path d="M14.5 12c-.276 0-.5-.224-.5-.5s.224-.5.5-.5c.109 0 .204-.042.287-.102.152-.926.213-1.912.213-2.899 0-1.026-.134-2.052-.397-3.01-.035.002-.068.01-.103.01-.276 0-.5-.224-.5-.5 0-.2.119-.369.289-.45-.901-2.319-2.66-4.05-5.289-4.05-.552 0-1 .448-1 1v6h.5c.276 0 .5.224.5.5s-.224.5-.5.5h-.5v6c0 1.105.895 2 2 2 2.611 0 3.939-1.709 4.55-4.005-.017 0-.033.005-.05.005zm-5-11c1.378 0 2.5 1.122 2.5 2.5 0 .276-.224.5-.5.5s-.5-.224-.5-.5c0-.827-.673-1.5-1.5-1.5-.276 0-.5-.224-.5-.5s.224-.5.5-.5zm1 8c.276 0 .5.224.5.5s-.224.5-.5.5-.5.224-.5.5.224.5.5.5.5.224.5.5-.224.5-.5.5c-.827 0-1.5-.673-1.5-1.5s.673-1.5 1.5-1.5zm0 6c-.827 0-1.5-.673-1.5-1.5 0-.276.224-.5.5-.5s.5.224.5.5.224.5.5.5.5-.224.5-.5.224-.5.5-.5.5.224.5.5c0 .827-.673 1.5-1.5 1.5zm2-7c-.276 0-.5-.224-.5-.5 0-.827-.673-1.5-1.5-1.5s-1.5-.673-1.5-1.5c0-.276.224-.5.5-.5s.5.224.5.5.224.5.5.5c1.378 0 2.5 1.122 2.5 2.5 0 .276-.224.5-.5.5z" class="iconic-brain-hemisphere iconic-brain-hemisphere-right iconic-property-fill"></path></g></svg></div><span class="block-navBrandText">&nbsp;&nbsp;Mario Ranftl</span></a> <span class="block-navBrandMobile"><span class="block-breadcrumbSeparator">&gt;</span> <span class="block-navBrandMobileInner"><a href="/notes/">Notes</a></span></span></span></div><div class="collapse navbar-collapse" id="navbar-content"><ul class="nav navbar-nav"><li class="block-navPage"><a href="/">About</a></li><li class="block-navPageActive active"><a href="/notes/">Notes</a></li><li class="block-navPage"><a href="/media/">Media</a></li></ul><ul class="nav navbar-nav navbar-right"><li class="block-navSubPage"><a href="/cv/">CV</a></li><li class="block-navSubPage"><a href="/portfolio/">Portfolio</a></li></ul></div></div></header><div class="template-note uiHandlerFade"><main><article><header class="template-note-header-wrapper"><div class="template-note-header container-fluid"><ul class="pager block-noteNavigator"><li class="previous text-right"><a href="/2014/09/30/hello-world/" title="Hello World"><i class="fa fa-angle-double-left"></i>&nbsp;&nbsp;older note</a></li><li class="next"><a href="/2014/11/28/valgrind-on-mac-os-x-10-10-yosemite/" title="Valgrind on Mac OS X 10.10 Yosemite">newer note&nbsp;&nbsp;<i class="fa fa-angle-double-right"></i></a></li></ul><header class="block-noteTitle"><h1>Extracting Libs from a Node.js Project</h1><h3>Publishing my Metalsmith Plugins</h3></header><div class="block-noteSubTitle"><h5><span class="block-noteDate text-muted"><time datetime="Wed Oct 01 2014 02:00:00 GMT+0200 (CEST)">01 Oct 2014</time></span> · <span class="block-noteAuthor">by <a href="/#hello">Mario Ranftl</a></span> · <span class="block-tagList text-nowrap"><a class="block-tagItem" href="/tags/#javascript"><i class="fa fa-tag fa-sm"></i>&nbsp;javascript</a> <a class="block-tagItem" href="/tags/#programming"><i class="fa fa-tag fa-sm"></i>&nbsp;programming</a></span> · <span class="block-noteCommentCount text-nowrap" data-disqus-url="http://ranf.tl/2014/10/01/extracting-libs-from-a-node-js-project/"><a href="http://ranf.tl/2014/10/01/extracting-libs-from-a-node-js-project/#disqus_thread">comments</a></span> · <span class="block-noteReadingInfo text-nowrap">344 words, 2 min</span></h5><hr class="small"></div></div></header><div class="template-note-contents container-fluid"><div class="contents"><p><a href="/2014/09/30/hello-world/" title="Hello World">As promised</a>, lets break out my customized plugins I&#x2019;ve used with <a href="http://metalsmith.io" title="Official metalsmith website">metalsmith</a> to build up this site. I had to rename them (<a href="https://github.com/segmentio/metalsmith.io/pull/61">see this pull request</a>) in order to be allowed to publish them on <a href="http://metalsmith.io" title="Official metalsmith website">metalsmith.io</a>.</p><p>I&#x2019;ve published these plugins:</p><ul><li><a href="#metalsmith-word-count">metalsmith-word-count</a></li><li><a href="#metalsmith-headings-identifier">metalsmith-headings-identifier</a></li><li><a href="#metalsmith-data-markdown">metalsmith-data-markdown</a></li></ul><h3 id="how-to-extract-logic-into-standalone-packages"><a class="heading-anchor" href="#how-to-extract-logic-into-standalone-packages"><span></span></a>How to extract logic into standalone packages</h3><p>Before publishing, my custom metalsmith plugins lived in their respective <code>metalsmith-XXX.js</code> file within the same project directory. I simply required them in my <code>index.js</code> file. Now I&#x2019;m moving them into their own package, so they can be reused in the future. Here&#x2019;s a quick overview on how to do that:</p><ol><li>The first step was to set up a new package for each plugin.</li><li><code>npm init</code> to get a proper one and install all dependent packages that you will need in the plugin.</li><li>Copy over all the code and point the <code>main</code> field in your <code>package.json</code> to the proper file. Attention, don&#x2019;t forget do install all required dependencies!</li><li><code>npm link</code> your new package to temporary <a href="http://elegantcode.com/2011/12/16/taking-baby-steps-with-node-js-linking-local-packages-with-npm/" title="Taking Baby Steps with Node.js &#x2013; Linking Local Packages with npm">locally use it within your root project</a>.</li><li>Test and <a href="https://gist.github.com/coolaj86/1318304" title="Getting Started with NPM (as a developer)">finally publish it</a>.</li></ol><h3 id="metalsmith-word-count"><a class="heading-anchor" href="#metalsmith-word-count"><span></span></a>metalsmith-word-count</h3><p>Are you curious about how the word count and estimated reading time are computed on my site? It&#x2019;s done via my plugin <a href="https://github.com/majodev/metalsmith-word-count" title="metalsmith-word-count on github">metalsmith-word-count</a>. It calculates the wordcount and average reading time of all paragraphs in a HTML file.</p><p><a href="https://www.npmjs.org/package/metalsmith-word-count" title="metalsmith-word-count on npm">install from npm</a> &#xB7; <a href="https://github.com/majodev/metalsmith-word-count" title="metalsmith-word-count on github">source on github</a></p><h3 id="metalsmith-headings-identifier"><a class="heading-anchor" href="#metalsmith-headings-identifier"><span></span></a>metalsmith-headings-identifier</h3><p>Do you want to automatically turn your markdown headings (<code>h1-h6</code>) into clickable permalinks? Then grab <a href="https://github.com/majodev/metalsmith-headings-identifier" title="metalsmith-headings-identifier on github">metalsmith-headings-identifier</a>. This idea is originally by <a href="http://remysharp.com/2014/08/08/automatic-permalinks-for-blog-posts">Remy Sharp</a>, with the difference, that it&#x2019;s now done during generation time with <a href="http://metalsmith.io" title="Official metalsmith website">metalsmith</a>.</p><p><a class="lightboximgwrap" href="headingsidentifierSample.png"><img src="headingsidentifierSample.png" alt="headingsidentifier example picture"></a></p><p><a href="https://www.npmjs.org/package/metalsmith-headings-identifier" title="metalsmith-headings-identifier on npm">install from npm</a> &#xB7; <a href="https://github.com/majodev/metalsmith-headings-identifier" title="metalsmith-headings-identifier on github">source on github</a></p><h3 id="metalsmith-data-markdown"><a class="heading-anchor" href="#metalsmith-data-markdown"><span></span></a>metalsmith-data-markdown</h3><p><a href="https://gist.github.com/paulirish/1343518">Inspired by Paul Irish&#x2019;s work</a> to use markdown within HTML tags, here comes <em>&#x201C;something similar&#x201D; (not as sophisticated)</em> wrapped in a metalsmith plugin. Now you can use <code>data-markdown</code> attributes to identify tags, that wrap markdown content and need to be converted to HTML during generation time.</p><p><a href="https://www.npmjs.org/package/metalsmith-data-markdown" title="metalsmith-data-markdown on npm">install from npm</a> &#xB7; <a href="https://github.com/majodev/metalsmith-data-markdown" title="metalsmith-data-markdown on github">source on github</a></p><h3 id="further-reading"><a class="heading-anchor" href="#further-reading"><span></span></a>Further reading</h3><ul><li><a href="http://elegantcode.com/2011/12/16/taking-baby-steps-with-node-js-linking-local-packages-with-npm/" title="Taking Baby Steps with Node.js &#x2013; Linking Local Packages with npm">Taking Baby Steps with Node.js &#x2013; Linking Local Packages with npm</a></li><li><a href="https://gist.github.com/coolaj86/1318304" title="Getting Started with NPM (as a developer)">Getting Started with NPM (as a developer)</a></li><li><a href="https://gist.github.com/unstoppablecarl/d864d662c3f1a1688a91" title="How to write metalsmith plugins">How to write metalsmith plugins</a></li></ul></div></div><footer class="template-note-footer container-fluid"><div class="block-noteComments"><h2 class="linedSeparator"><i class="fa fa-comments"></i>&nbsp;&nbsp;Comments</h2><div id="disqus_thread" class="block-disqus" data-pageid="note_extracting_libs_node_projects" data-title="Extracting Libs from a Node.js Project" data-url="http://ranf.tl/2014/10/01/extracting-libs-from-a-node-js-project/" data-lang="en"></div><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments</a>!<br /></noscript><a href="http://disqus.com" class="dsq-brlink">Powered by <span class="logo-disqus">Disqus</span></a></div><div class="block-noteShare"><h2 class="linedSeparator"><i class="fa fa-share-alt"></i>&nbsp;&nbsp;Share</h2><ul class="list-inline text-center"><li><a class="btn btn-primary" role="button" href="mailto:?subject=Extracting%20Libs%20from%20a%20Node.js%20Project&body=http%3A%2F%2Franf.tl%2F2014%2F10%2F01%2Fextracting-libs-from-a-node-js-project%2F"><i class="fa fa-at fa-lg"></i></a></li><li><a class="btn btn-primary" role="button" target="_blank" href="http://twitter.com/intent/tweet?url=http%3A%2F%2Franf.tl%2F2014%2F10%2F01%2Fextracting-libs-from-a-node-js-project%2F&text=Extracting%20Libs%20from%20a%20Node.js%20Project&via=majodev"><i class="fa fa-twitter fa-lg"></i></a></li><li><a class="btn btn-primary" role="button" target="_blank" href="http://www.facebook.com/sharer.php?u=http%3A%2F%2Franf.tl%2F2014%2F10%2F01%2Fextracting-libs-from-a-node-js-project%2F"><i class="fa fa-facebook fa-lg"></i></a></li><li><a class="btn btn-primary" role="button" target="_blank" href="https://plus.google.com/share?url=http%3A%2F%2Franf.tl%2F2014%2F10%2F01%2Fextracting-libs-from-a-node-js-project%2F"><i class="fa fa-google-plus fa-lg"></i></a></li><li><a class="btn btn-primary" role="button" target="_blank" href="http://www.linkedin.com/shareArticle?mini=true&amp;ro=true&amp;url=http%3A%2F%2Franf.tl%2F2014%2F10%2F01%2Fextracting-libs-from-a-node-js-project%2F&amp;title=Extracting%20Libs%20from%20a%20Node.js%20Project&amp;source=Mario%20Ranftl&amp;summary=As%20promised%2C%20lets%20break%20out%20my%20customized%20plugins%20I%E2%80%99ve%20used%20with%20metalsmith%20to%20build%20up%20this%20site.%20I%20had%20to%20rename%20them%20(see%20this%20pull%20request)%20in%20order%20to%20be%20allowed%20to%20publish%20them%20on%20metalsmith.io.&amp;armin=armin"><i class="fa fa-linkedin fa-lg"></i></a></li><li><a class="btn btn-primary" role="button" target="_blank" href="//pinterest.com/pin/create/link/?url=http%3A%2F%2Franf.tl%2F2014%2F10%2F01%2Fextracting-libs-from-a-node-js-project%2F&description=Extracting%20Libs%20from%20a%20Node.js%20Project"><i class="fa fa-pinterest fa-lg"></i></a></li><li><a class="btn btn-primary" role="button" target="_blank" href="http://www.tumblr.com/share/link?url=http%3A%2F%2Franf.tl%2F2014%2F10%2F01%2Fextracting-libs-from-a-node-js-project%2F&amp;name=Extracting%20Libs%20from%20a%20Node.js%20Project&amp;description=As%20promised%2C%20lets%20break%20out%20my%20customized%20plugins%20I%E2%80%99ve%20used%20with%20metalsmith%20to%20build%20up%20this%20site.%20I%20had%20to%20rename%20them%20(see%20this%20pull%20request)%20in%20order%20to%20be%20allowed%20to%20publish%20them%20on%20metalsmith.io."><i class="fa fa-tumblr fa-lg"></i></a></li><li><a class="btn btn-primary" role="button" href="/feed.xml"><i class="fa fa-rss fa-lg"></i>&nbsp;subscribe</a></li></ul></div><div class="block-noteRelated"><h2 class="linedSeparator"><i class="fa fa-puzzle-piece"></i>&nbsp;&nbsp;Related notes</h2><article class="block-noteArticleItem"><div class="block-noteArticleItem-inner"><a href="/2014/09/30/hello-world/"></a><div class="block-noteItem row"><div class="col-sm-3 col-sm-push-9 text-right-sm"><span class="block-noteDate text-muted"><time datetime="Tue Sep 30 2014 02:00:00 GMT+0200 (CEST)">30 Sep 2014</time></span></div><div class="col-sm-9 col-sm-pull-3"><h4 class="no-margin">Hello World</h4></div></div><div class="block-firstparagraph"><p>Hello World! You are reading the first published note on my shiny new site. Currently everything feels a bit empty, but I hope I can fill things up with useful information ASAP.</p></div></div><p class="no-margin no-padding"><a class="block-noteLink" href="/2014/09/30/hello-world/"><i class="fa fa-level-up fa-rotate-90"></i>&nbsp;&nbsp;read this note</a> · <span class="block-tagList text-nowrap"><a class="block-tagItem" href="/tags/#private"><i class="fa fa-tag fa-sm"></i>&nbsp;private</a></span> · <span class="block-noteCommentCount text-nowrap" data-disqus-url="http://ranf.tl/2014/09/30/hello-world/"><a href="http://ranf.tl/2014/09/30/hello-world/#disqus_thread">comments</a></span> · <span class="block-noteReadingInfo text-nowrap">340 words, 2 min</span></p></article></div></footer></article></main></div></div><div id="footer_push"></div><footer class="block-footer"><div class="container-fluid text-center"><p><i class="fa fa-copyright"></i> 2014 Mario Ranftl | <a href="http://twitter.com/majodev">@majodev</a></p><p class="footer-trivialpages"><a href="/legal/">Legal</a> · <a href="/tags/">Tags</a></p><p class="fontsize-mini no-margin">Content under <a href="http://creativecommons.org/licenses/by-nc-sa/2.0/at/">Creative Commons (CC BY-NC-SA 2.0 AT)</a></p><p class="fontsize-mini">Code under <a href="http://majodev.mit-license.org/">MIT License</a></p><p class="fontsize-mini"></p><p class="no-margin fontsize-mini"><a href="https://github.com/majodev/majodev.github.io/commit/9a3f252">commit/9a3f252</a></p></div></footer></div><script src="/assets/js/scripts.min.js"></script><div id="scripts_src"></div></body></html>